"use strict";document.addEventListener("DOMContentLoaded",function(){function n(e){var t;e&&(e.classList.add("active"),document.body.style.overflow="hidden",t=e.classList.contains("favParthners__registerPopup"),e.style.overflowY=!t&&q()?"hidden":"auto",S(e))}function o(e){e&&(e.classList.remove("active","content-tall"),document.body.style.overflow="")}function a(){[g,w,P,_].filter(Boolean).forEach(function(e){e.classList.remove("active","content-tall")}),document.body.style.overflow=""}function s(r){document.querySelectorAll(".".concat(r,'-input:not([type="password"])')).forEach(function(t){t.addEventListener("invalid",function(e){e.preventDefault();e=k(this,this.name);e&&A(this,e,r)}),["input","focus","blur"].forEach(function(e){t.addEventListener(e,function(){"input"===e&&C(this,r),x(this,r)})})})}function i(t){document.querySelectorAll(".".concat(t,"-clearInput")).forEach(function(e){e.addEventListener("click",function(){var e=this.closest(".".concat(t,"-inputWrapper")),e=null==e?void 0:e.querySelector(".".concat(t,"-input"));e&&(e.value="",e.classList.remove("error","has-value"),e.focus(),C(e,t),x(e,t))})})}function c(e,t,r,n){return(r=r(t))?(A(e,r,n),!1):(C(e,n),!0)}function u(e,t){return e&&""!==e.trim()?null:v[t].required}function l(e){return e&&""!==e.trim()?h.test(e)?null:v.email.invalid:v.email.required}function p(e){return e&&""!==e.trim()?e.length<y?v.password.minLength:null:v.password.required}function d(e){var t;_&&((t=_.querySelector(".favParthners__registerConfirmedPopup-email"))&&e&&(t.textContent=e),n(_))}var t,e=".favParthners__header, .favParthners__content, .favParthners__advantages, .favParthners__footer",r={register:".favParthners__registerPopup",login:".favParthners__loginPopup",forgotPassword:".favParthners__forgotPasswordPopup",registerConfirmed:".favParthners__registerConfirmedPopup"},f='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M4.46967 4.46967C4.76256 4.17678 5.23744 4.17678 5.53033 4.46967L19.5303 18.4697C19.8232 18.7626 19.8232 19.2374 19.5303 19.5303C19.2374 19.8232 18.7626 19.8232 18.4697 19.5303L4.46967 5.53033C4.17678 5.23744 4.17678 4.76256 4.46967 4.46967Z" fill="#0A0A0A"/>\n    <path d="M3.80078 3.76361L20.1996 20.1624" stroke="#0A0A0A" stroke-width="1.5" stroke-linecap="round"/>\n    <circle cx="11.9995" cy="12" r="3.23684" stroke="#0A0A0A" stroke-width="1.5"/>\n    <path d="M12 5.81677C15.4803 5.81694 18.6465 8.34978 20.5947 10.3666C21.4932 11.2968 21.4931 12.7029 20.5947 13.6332C18.6465 15.65 15.4803 18.1828 12 18.183C8.51961 18.183 5.35356 15.65 3.40527 13.6332C2.50662 12.7029 2.50662 11.2969 3.40527 10.3666C5.35357 8.34975 8.51968 5.81677 12 5.81677Z" stroke="#0A0A0A" stroke-width="1.5"/>\n  </svg>',m='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">\n    <circle cx="12" cy="12" r="3.23684" stroke="#0A0A0A" stroke-width="1.5"/>\n    <path d="M12 5.81677C15.4803 5.81694 18.6465 8.34978 20.5947 10.3666C21.4932 11.2968 21.4931 12.7029 20.5947 13.6332C18.6465 15.65 15.4803 18.1828 12 18.183C8.51961 18.183 5.35356 15.65 3.40527 13.6332C2.50662 12.7029 2.50662 11.2969 3.40527 10.3666C5.35357 8.34975 8.51968 5.81677 12 5.81677Z" stroke="#0A0A0A" stroke-width="1.5"/>\n  </svg>',v={name:{required:"Введіть ім'я"},surname:{required:"Введіть прізвище"},email:{required:"Введіть email",invalid:"Введіть коректний email"},password:{required:"Введіть пароль",minLength:"Пароль містить менше 6 символів"},confirmPassword:{required:"Підтвердіть пароль",mismatch:"Паролі не співпадають"},messenger:{required:"Введіть контакт у месенджері"},companyName:{required:"Введіть назву компанії"},companySite:{required:"Введіть сайт компанії"},default:{required:"Це поле обов'язкове"}},h=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,y=6,e=document.querySelectorAll(e),g=document.querySelector(r.register),w=document.querySelector(r.login),P=document.querySelector(r.forgotPassword),_=document.querySelector(r.registerConfirmed),q=("IntersectionObserver"in window?(t=new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting&&(e.target.classList.add("is-inview"),t.unobserve(e.target))})},{threshold:.2}),e.forEach(function(e){return t.observe(e)})):e.forEach(function(e){return e.classList.add("is-inview")}),function(){return window.matchMedia("(max-height: 700px) and (orientation: landscape)").matches}),S=function(n){var o;n&&(o=n.querySelector('[class*="-content"]'))&&setTimeout(function(){var e=o.offsetHeight,t=window.innerHeight,r=n.classList.contains("favParthners__registerPopup");n.classList.toggle("content-tall",t-100<e),r||(n.style.overflowY=q()?"hidden":"auto")},10)},L=function(e,t,r){var r=e.closest(r);r&&(r=r.querySelector(t))&&(t="password"===r.type,r.type=t?"text":"password",e.innerHTML=t?m:f)},E=function(e,t){return e.closest(".".concat(t,"-inputWrapper"))||e.closest(".".concat(t,"-passwordWrapper"))},A=function(e,t,r){var n,o,a;e&&(e.classList.add("error"),n=null==(n=e.closest(".".concat(r,"-field")))?void 0:n.querySelector(".".concat(r,"-errorText")),o=null==(a=E(e,r))?void 0:a.querySelector(".".concat(r,"-errorIcon")),a=null==a?void 0:a.querySelector(".".concat(r,"-clearInput")),e=e.classList.contains("".concat(r,"-input--password")),n&&(n.textContent=t,n.style.display="block"),o&&!e&&(o.style.display="flex"),a)&&(a.style.display="none")},C=function(e,t){var r;e&&(e.classList.remove("error"),r=null==(r=e.closest(".".concat(t,"-field")))?void 0:r.querySelector(".".concat(t,"-errorText")),e=null==(e=E(e,t))?void 0:e.querySelector(".".concat(t,"-errorIcon")),r&&(r.style.display="none",r.textContent=""),e)&&(e.style.display="none")},x=function(e,t){var r,n,o,a=E(e,t);a&&(o=a.querySelector(".".concat(t,"-clearInput")),a=a.querySelector(".".concat(t,"-errorIcon")),r=e.classList.contains("error"),n=""!==e.value.trim(),t=e.classList.contains("".concat(t,"-input--password")),o&&!t&&(o.style.display=(o=n&&!r)?"flex":"none",e.classList.toggle("has-value",o)),a)&&!t&&(a.style.display=r?"flex":"none")},k=function(e,t){return e.validity.valueMissing?(null==(t=v[t])?void 0:t.required)||v.default.required:e.validity.typeMismatch&&"email"===e.type?v.email.invalid:""};[{selector:".favParthners__header-menu--register",popup:g},{selector:".favParthners__header-menu--login",popup:w},{selector:".favParthners__content-info-actionBtn",popup:g},{selector:".favParthners__openLoginPopup",popup:w},{selector:".favParthners__openRegisterPopup",popup:g},{selector:".favParthners__openLoginPopupFromForgot",popup:w},{selector:".favParthners__loginPopup-forgotPassword",popup:P}].forEach(function(e){var t,r=e.selector,e=e.popup;t=e,document.querySelectorAll(r).forEach(function(e){null!=e&&e.addEventListener("click",function(e){e.preventDefault(),a(),n(t)})})}),null!=(r=document.querySelector(".favParthners__header-menu--test"))&&r.addEventListener("click",function(e){e.preventDefault(),a(),d("test@example.com")});function b(){var t,r;N&&(t=N.checked,r="favParthners__registerPopup",I.forEach(function(e){return e.classList.toggle("is-hidden",!t)}),T.forEach(function(e){t?(e.removeAttribute("disabled"),e.setAttribute("required","required")):(e.value="",e.classList.remove("error","has-value"),e.setAttribute("disabled","disabled"),e.removeAttribute("required"),C(e,r),x(e,r))}))}function D(e){var t,r;s(e),i(e),t=e,document.querySelectorAll(".".concat(t,"-input--password")).forEach(function(e){e.addEventListener("invalid",function(e){e.preventDefault();e=k(this,this.name);e&&A(this,e,t)})}),r=e,document.querySelectorAll(".".concat(r,"-togglePassword")).forEach(function(e){var t=e.closest(".".concat(r,"-passwordWrapper")),t=null==t?void 0:t.querySelector(".".concat(r,"-input--password"));t&&(e.innerHTML="password"===t.type?f:m),e.addEventListener("click",function(){L(this,".".concat(r,"-input--password"),".".concat(r,"-passwordWrapper"))})})}[{popup:g,prefix:"registerPopup"},{popup:w,prefix:"loginPopup"},{popup:P,prefix:"forgotPasswordPopup"},{popup:_,prefix:"registerConfirmedPopup"}].forEach(function(e){var t,r=e.popup,e=e.prefix;null!=(t=document.querySelector(".favParthners__".concat(e,"-close")))&&t.addEventListener("click",function(){return o(r)}),"registerConfirmedPopup"!==e&&null!=(t=document.querySelector(".favParthners__".concat(e,"-overlay")))&&t.addEventListener("click",function(){return o(r)})}),null!=(e=document.querySelector(".favParthners__registerConfirmedPopup-button"))&&e.addEventListener("click",function(){return window.location.href="mailto:"});var M,N=document.querySelector('.favParthners__registerPopup input[name="advertiser"]'),I=document.querySelectorAll(".js-advertiser-field"),T=document.querySelectorAll('.favParthners__registerPopup input[name="companyName"], .favParthners__registerPopup input[name="companySite"]'),B=(D("favParthners__registerPopup"),D("favParthners__loginPopup"),s("favParthners__forgotPasswordPopup"),i("favParthners__forgotPasswordPopup"),(r=document.querySelector(".favParthners__registerPopup-form"))&&r.addEventListener("submit",function(e){e.preventDefault();var e="favParthners__registerPopup",t=new FormData(this),r={name:this.querySelector('input[name="name"]'),surname:this.querySelector('input[name="surname"]'),email:this.querySelector('input[name="email"]'),password:this.querySelector('input[name="password"]'),confirmPassword:this.querySelector('input[name="confirmPassword"]'),messenger:this.querySelector('input[name="messenger"]'),companyName:this.querySelector('input[name="companyName"]'),companySite:this.querySelector('input[name="companySite"]')},n={name:t.get("name"),surname:t.get("surname"),email:t.get("email"),password:t.get("password"),confirmPassword:t.get("confirmPassword"),messenger:t.get("messenger"),advertiser:"on"===t.get("advertiser"),companyName:t.get("companyName"),companySite:t.get("companySite")},t=!0,t=(t=(t=(t=(t=(t&=c(r.name,n.name,function(e){return u(e,"name")},e))&c(r.surname,n.surname,function(e){return u(e,"surname")},e))&c(r.email,n.email,l,e))&c(r.password,n.password,p,e))&c(r.confirmPassword,n.confirmPassword,function(e){return t=n.password,(e=e)&&""!==e.trim()?t!==e?v.confirmPassword.mismatch:null:v.confirmPassword.required;var t},e))&c(r.messenger,n.messenger,function(e){return u(e,"messenger")},e);n.advertiser?t=(t&=c(r.companyName,n.companyName,function(e){return u(e,"companyName")},e))&c(r.companySite,n.companySite,function(e){return u(e,"companySite")},e):(C(r.companyName,e),C(r.companySite,e)),t&&(o(g),d(n.email))}),(e=document.querySelector(".favParthners__loginPopup-form"))&&e.addEventListener("submit",function(e){e.preventDefault();var e="favParthners__loginPopup",t=new FormData(this),r={email:this.querySelector('input[name="email"]'),password:this.querySelector('input[name="password"]')},t={email:t.get("email"),password:t.get("password")};c(r.email,t.email,l,e),c(r.password,t.password,p,e)}),(r=document.querySelector(".favParthners__forgotPasswordPopup-form"))&&r.addEventListener("submit",function(e){e.preventDefault();var e=new FormData(this),t=this.querySelector('input[name="email"]'),e=e.get("email");c(t,e,l,"favParthners__forgotPasswordPopup")}),b(),null!=N&&N.addEventListener("change",b),window.addEventListener("resize",function(){clearTimeout(M),M=setTimeout(function(){[g,w,P,_].filter(Boolean).forEach(function(e){e.classList.contains("active")&&S(e)})},100)}),[_,P,w,g]);document.addEventListener("keydown",function(e){"Escape"===e.key&&(e=B.find(function(e){return null==e?void 0:e.classList.contains("active")}))&&o(e)})});