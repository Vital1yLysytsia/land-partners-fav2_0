"use strict";document.addEventListener("DOMContentLoaded",function(){function n(e){var r;e&&(e.classList.add("active"),document.body.style.overflow="hidden",r=e.classList.contains("favParthners__registerPopup"),e.style.overflowY=!r&&q()?"hidden":"auto",S(e))}function o(e){e&&(e.classList.remove("active"),document.body.style.overflow="")}function a(){[g,P,w,_].filter(Boolean).forEach(function(e){e.classList.remove("active")}),document.body.style.overflow=""}function s(t){document.querySelectorAll(".".concat(t,'-input:not([type="password"])')).forEach(function(r){r.addEventListener("invalid",function(e){e.preventDefault();e=k(this,this.name);e&&A(this,e,t)}),["input","focus","blur"].forEach(function(e){r.addEventListener(e,function(){"input"===e&&C(this,t),x(this,t)})})})}function i(r){document.querySelectorAll(".".concat(r,"-clearInput")).forEach(function(e){e.addEventListener("click",function(){var e=this.closest(".".concat(r,"-inputWrapper")),e=null==e?void 0:e.querySelector(".".concat(r,"-input"));e&&(e.value="",e.classList.remove("error","has-value"),e.focus(),C(e,r),x(e,r))})})}function c(e,r,t,n){return(t=t(r))?(A(e,t,n),!1):(C(e,n),!0)}function u(e,r){return e&&""!==e.trim()?null:v[r].required}function l(e){return e&&""!==e.trim()?h.test(e)?null:v.email.invalid:v.email.required}function p(e){return e&&""!==e.trim()?e.length<y?v.password.minLength:null:v.password.required}function d(e){var r;_&&((r=_.querySelector(".favParthners__registerConfirmedPopup-email"))&&e&&(r.textContent=e),n(_))}var r,e=".favParthners__header, .favParthners__content, .favParthners__advantages, .favParthners__footer",t={register:".favParthners__registerPopup",login:".favParthners__loginPopup",forgotPassword:".favParthners__forgotPasswordPopup",registerConfirmed:".favParthners__registerConfirmedPopup"},f='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M4.46967 4.46967C4.76256 4.17678 5.23744 4.17678 5.53033 4.46967L19.5303 18.4697C19.8232 18.7626 19.8232 19.2374 19.5303 19.5303C19.2374 19.8232 18.7626 19.8232 18.4697 19.5303L4.46967 5.53033C4.17678 5.23744 4.17678 4.76256 4.46967 4.46967Z" fill="#0A0A0A"/>\n    <path d="M3.80078 3.76361L20.1996 20.1624" stroke="#0A0A0A" stroke-width="1.5" stroke-linecap="round"/>\n    <circle cx="11.9995" cy="12" r="3.23684" stroke="#0A0A0A" stroke-width="1.5"/>\n    <path d="M12 5.81677C15.4803 5.81694 18.6465 8.34978 20.5947 10.3666C21.4932 11.2968 21.4931 12.7029 20.5947 13.6332C18.6465 15.65 15.4803 18.1828 12 18.183C8.51961 18.183 5.35356 15.65 3.40527 13.6332C2.50662 12.7029 2.50662 11.2969 3.40527 10.3666C5.35357 8.34975 8.51968 5.81677 12 5.81677Z" stroke="#0A0A0A" stroke-width="1.5"/>\n  </svg>',m='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">\n    <circle cx="12" cy="12" r="3.23684" stroke="#0A0A0A" stroke-width="1.5"/>\n    <path d="M12 5.81677C15.4803 5.81694 18.6465 8.34978 20.5947 10.3666C21.4932 11.2968 21.4931 12.7029 20.5947 13.6332C18.6465 15.65 15.4803 18.1828 12 18.183C8.51961 18.183 5.35356 15.65 3.40527 13.6332C2.50662 12.7029 2.50662 11.2969 3.40527 10.3666C5.35357 8.34975 8.51968 5.81677 12 5.81677Z" stroke="#0A0A0A" stroke-width="1.5"/>\n  </svg>',v={name:{required:"Введіть ім'я"},surname:{required:"Введіть прізвище"},email:{required:"Введіть email",invalid:"Введіть коректний email"},password:{required:"Введіть пароль",minLength:"Пароль містить менше 6 символів"},confirmPassword:{required:"Підтвердіть пароль",mismatch:"Паролі не співпадають"},messenger:{required:"Введіть контакт у месенджері"},companyName:{required:"Введіть назву компанії"},companySite:{required:"Введіть сайт компанії"},default:{required:"Це поле обов'язкове"}},h=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,y=6,e=document.querySelectorAll(e),g=document.querySelector(t.register),P=document.querySelector(t.login),w=document.querySelector(t.forgotPassword),_=document.querySelector(t.registerConfirmed),q=("IntersectionObserver"in window?(r=new IntersectionObserver(function(e,r){e.forEach(function(e){e.isIntersecting&&(e.target.classList.add("is-inview"),r.unobserve(e.target))})},{threshold:.2}),e.forEach(function(e){return r.observe(e)})):e.forEach(function(e){return e.classList.add("is-inview")}),function(){return window.matchMedia("(max-height: 700px) and (orientation: landscape)").matches}),S=function(e){e&&!e.classList.contains("favParthners__registerPopup")&&(e.style.overflowY=q()?"hidden":"auto")},L=function(e,r,t){var t=e.closest(t);t&&(t=t.querySelector(r))&&(r="password"===t.type,t.type=r?"text":"password",e.innerHTML=r?m:f)},E=function(e,r){return e.closest(".".concat(r,"-inputWrapper"))||e.closest(".".concat(r,"-passwordWrapper"))},A=function(e,r,t){var n,o,a;e&&(e.classList.add("error"),n=null==(n=e.closest(".".concat(t,"-field")))?void 0:n.querySelector(".".concat(t,"-errorText")),o=null==(a=E(e,t))?void 0:a.querySelector(".".concat(t,"-errorIcon")),a=null==a?void 0:a.querySelector(".".concat(t,"-clearInput")),e=e.classList.contains("".concat(t,"-input--password")),n&&(n.textContent=r,n.style.display="block"),o&&!e&&(o.style.display="flex"),a)&&(a.style.display="none")},C=function(e,r){var t;e&&(e.classList.remove("error"),t=null==(t=e.closest(".".concat(r,"-field")))?void 0:t.querySelector(".".concat(r,"-errorText")),e=null==(e=E(e,r))?void 0:e.querySelector(".".concat(r,"-errorIcon")),t&&(t.style.display="none",t.textContent=""),e)&&(e.style.display="none")},x=function(e,r){var t,n,o,a=E(e,r);a&&(o=a.querySelector(".".concat(r,"-clearInput")),a=a.querySelector(".".concat(r,"-errorIcon")),t=e.classList.contains("error"),n=""!==e.value.trim(),r=e.classList.contains("".concat(r,"-input--password")),o&&!r&&(o.style.display=(o=n&&!t)?"flex":"none",e.classList.toggle("has-value",o)),a)&&!r&&(a.style.display=t?"flex":"none")},k=function(e,r){return e.validity.valueMissing?(null==(r=v[r])?void 0:r.required)||v.default.required:e.validity.typeMismatch&&"email"===e.type?v.email.invalid:""};[{selector:".favParthners__header-menu--register",popup:g},{selector:".favParthners__header-menu--login",popup:P},{selector:".favParthners__content-info-actionBtn",popup:g},{selector:".favParthners__openLoginPopup",popup:P},{selector:".favParthners__openRegisterPopup",popup:g},{selector:".favParthners__openLoginPopupFromForgot",popup:P},{selector:".favParthners__loginPopup-forgotPassword",popup:w}].forEach(function(e){var r,t=e.selector,e=e.popup;r=e,document.querySelectorAll(t).forEach(function(e){null!=e&&e.addEventListener("click",function(e){e.preventDefault(),a(),n(r)})})}),null!=(t=document.querySelector(".favParthners__header-menu--test"))&&t.addEventListener("click",function(e){e.preventDefault(),a(),d("test@example.com")});function b(){var r,t;N&&(r=N.checked,t="favParthners__registerPopup",I.forEach(function(e){return e.classList.toggle("is-hidden",!r)}),T.forEach(function(e){r?(e.removeAttribute("disabled"),e.setAttribute("required","required")):(e.value="",e.classList.remove("error","has-value"),e.setAttribute("disabled","disabled"),e.removeAttribute("required"),C(e,t),x(e,t))}))}function D(e){var r,t;s(e),i(e),r=e,document.querySelectorAll(".".concat(r,"-input--password")).forEach(function(e){e.addEventListener("invalid",function(e){e.preventDefault();e=k(this,this.name);e&&A(this,e,r)})}),t=e,document.querySelectorAll(".".concat(t,"-togglePassword")).forEach(function(e){var r=e.closest(".".concat(t,"-passwordWrapper")),r=null==r?void 0:r.querySelector(".".concat(t,"-input--password"));r&&(e.innerHTML="password"===r.type?f:m),e.addEventListener("click",function(){L(this,".".concat(t,"-input--password"),".".concat(t,"-passwordWrapper"))})})}[{popup:g,prefix:"registerPopup"},{popup:P,prefix:"loginPopup"},{popup:w,prefix:"forgotPasswordPopup"},{popup:_,prefix:"registerConfirmedPopup"}].forEach(function(e){var r,t=e.popup,e=e.prefix;null!=(r=document.querySelector(".favParthners__".concat(e,"-close")))&&r.addEventListener("click",function(){return o(t)}),"registerConfirmedPopup"!==e&&null!=(r=document.querySelector(".favParthners__".concat(e,"-overlay")))&&r.addEventListener("click",function(){return o(t)})}),null!=(e=document.querySelector(".favParthners__registerConfirmedPopup-button"))&&e.addEventListener("click",function(){return window.location.href="mailto:"});var M,N=document.querySelector('.favParthners__registerPopup input[name="advertiser"]'),I=document.querySelectorAll(".js-advertiser-field"),T=document.querySelectorAll('.favParthners__registerPopup input[name="companyName"], .favParthners__registerPopup input[name="companySite"]'),B=(D("favParthners__registerPopup"),D("favParthners__loginPopup"),s("favParthners__forgotPasswordPopup"),i("favParthners__forgotPasswordPopup"),(t=document.querySelector(".favParthners__registerPopup-form"))&&t.addEventListener("submit",function(e){e.preventDefault();var e="favParthners__registerPopup",r=new FormData(this),t={name:this.querySelector('input[name="name"]'),surname:this.querySelector('input[name="surname"]'),email:this.querySelector('input[name="email"]'),password:this.querySelector('input[name="password"]'),confirmPassword:this.querySelector('input[name="confirmPassword"]'),messenger:this.querySelector('input[name="messenger"]'),companyName:this.querySelector('input[name="companyName"]'),companySite:this.querySelector('input[name="companySite"]')},n={name:r.get("name"),surname:r.get("surname"),email:r.get("email"),password:r.get("password"),confirmPassword:r.get("confirmPassword"),messenger:r.get("messenger"),advertiser:"on"===r.get("advertiser"),companyName:r.get("companyName"),companySite:r.get("companySite")},r=!0,r=(r=(r=(r=(r=(r&=c(t.name,n.name,function(e){return u(e,"name")},e))&c(t.surname,n.surname,function(e){return u(e,"surname")},e))&c(t.email,n.email,l,e))&c(t.password,n.password,p,e))&c(t.confirmPassword,n.confirmPassword,function(e){return r=n.password,(e=e)&&""!==e.trim()?r!==e?v.confirmPassword.mismatch:null:v.confirmPassword.required;var r},e))&c(t.messenger,n.messenger,function(e){return u(e,"messenger")},e);n.advertiser?r=(r&=c(t.companyName,n.companyName,function(e){return u(e,"companyName")},e))&c(t.companySite,n.companySite,function(e){return u(e,"companySite")},e):(C(t.companyName,e),C(t.companySite,e)),r&&(o(g),d(n.email))}),(e=document.querySelector(".favParthners__loginPopup-form"))&&e.addEventListener("submit",function(e){e.preventDefault();var e="favParthners__loginPopup",r=new FormData(this),t={email:this.querySelector('input[name="email"]'),password:this.querySelector('input[name="password"]')},r={email:r.get("email"),password:r.get("password")};c(t.email,r.email,l,e),c(t.password,r.password,p,e)}),(t=document.querySelector(".favParthners__forgotPasswordPopup-form"))&&t.addEventListener("submit",function(e){e.preventDefault();var e=new FormData(this),r=this.querySelector('input[name="email"]'),e=e.get("email");c(r,e,l,"favParthners__forgotPasswordPopup")}),b(),null!=N&&N.addEventListener("change",b),window.addEventListener("resize",function(){clearTimeout(M),M=setTimeout(function(){[g,P,w,_].filter(Boolean).forEach(function(e){e.classList.contains("active")&&S(e)})},100)}),[_,w,P,g]);document.addEventListener("keydown",function(e){"Escape"===e.key&&(e=B.find(function(e){return null==e?void 0:e.classList.contains("active")}))&&o(e)})});